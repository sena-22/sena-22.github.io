---
title: "[Main Project] 02. main page êµ¬ì„±"
excerpt: "main page"

categories:
  - main project
tags:
  - [project, codestates, page, react]

toc: true
toc_sticky: true

date: 2023-02-03
last_modified_at: 2023-02-03
---

## 1. ë¼ìš°íŒ…

ê°™ì€ urlë¡œ ë¡œê·¸ì¸ ì „ê³¼ ë¡œê·¸ì¸ í›„ì˜ ë©”ì¸ í˜ì´ì§€ë¥¼ ë‹¤ë¥´ê²Œ ë‚˜íƒ€ë‚´ëŠ” ë°©ë²•ì„ ì‚¬ìš©í–ˆë‹¤. <br />
í”„ë¡œì íŠ¸ì—ì„œ ë¦¬ì•¡íŠ¸ë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— `react-router-dom`ì„ ì‚¬ìš©í•´ì„œ ë¼ìš°íŒ… ì‘ì—…ì„ í•´ì£¼ì—ˆë‹¤.

```javascript
//app.js

import { useEffect, useState } from 'react';
import { Route, Routes } from 'react-router-dom';

import Home from './Pages/Home'; //ë§Œë“¤ì–´ë‘” í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì™”ë‹¤
import Main from './Pages/Main';

function App() {
    const [isLoggedIn, setIsLoggedIn] = useState(false);

    ...

  return (
    <>
      <Routes>
       <Route path="/" element={isLoggedIn ? <Main /> : <Home />} />
       ...
      </Routes>
    </>
  )
}
```

ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ ìƒíƒœë¡œ ë§Œë“¤ì–´ ë¡œê·¸ì¸ ë˜ì—ˆì„ ê²½ìš°ì—ëŠ” `Main` í˜ì´ì§€ê°€, ë¡œê·¸ì¸ì´ ë˜ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” `Home` í˜ì´ì§€ê°€ ë‚˜íƒ€ë‚œë‹¤. ë¡œê·¸ì¸ ìƒíƒœëŠ” `token`ê³¼ `memberId` ë“±ìœ¼ë¡œ íŒë³„í–ˆë‹¤.

## 2. Home Page

### ğŸ“ƒ êµ¬ì¡°

`Home` í˜ì´ì§€ì™€ `Main` í˜ì´ì§€ê°€ ë™ì¼í•˜ê²Œ ì¼ì • ì¶”ê°€ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— `Home` í˜ì´ì§€ë¥¼ ì»´í¬ë„ŒíŠ¸í™” ì‹œì¼œ `Main` í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•˜ì˜€ë‹¤.

ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ `className`ì„ ë‹¤ë¥´ê²Œ ë§Œë“¤ê³ , <mark style='background-color: #ffdce0'>ë‚ ì§œ</mark>, <mark style='background-color: #ffdce0'>ë„ì‹œ</mark>ë¥¼ ì„ íƒí•œ í›„ ë¹„ë¡œê·¸ì¸ ìƒíƒœì—ì„œëŠ” ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ, ë¡œê·¸ì¸ ìƒíƒœì—ì„œëŠ” ë°”ë¡œ ì¼ì • ë“±ë¡ í˜ì´ì§€ë¡œ ê°ˆ ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì—ˆë‹¤.

### ğŸ“ƒ AutoComplete

ë„ì‹œ ì„ íƒì˜ ê²½ìš° DBì— ì €ì¥ëœ ë„ì‹œ ëª©ë¡ì„ ë¶ˆëŸ¬ì™€ ìë™ ì™„ì„± ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆë‹¤.

```javascript
const [city, setCity] = useState();
```

ë„ì‹œ ëª©ë¡ì„ ë¶ˆëŸ¬ì™€ `city`ì— ë‹´ì•„ì¤€ë‹¤.

```javascript
useEffect(() => {
  if (inputValue === "") {
    setHasText(false);
    setOptions([]);
    setSearch && setSearch(false);
  } else {
    setOptions(matchStock(city, inputValue));
    handleDestination(inputValue);
  }
}, [inputValue]);
```

ê²€ìƒ‰ì°½ì— ê°’ì„ ì…ë ¥í•  ë•Œë§ˆë‹¤ `options` ë°°ì—´ì´ ì—…ë°ì´íŠ¸ ëœë‹¤.

```javascript
const matchStock = (city, inputValue) => {
  if (!inputValue) {
    return [];
  }

  if (!isNaN(Number(inputValue)) && inputValue.length < 3) {
    return [];
  }

  return city
    .filter((option) => {
      return isInitialMatch(inputValue, option);
    })
    .map((option) => {
      return option;
    })
    .slice(0, 8);
};
```

`options`ì— ë³´ì—¬ì¤„ ê°’ì„ ì œì–´í•˜ëŠ” ë¶€ë¶„. ë„ì‹œ ëª©ë¡ ì¤‘ì—ì„œ `isInitialMatch` í•¨ìˆ˜ì—ì„œ `true` ê°’ì´ ë‚˜ì˜¨ ë„ì‹œë§Œ í•„í„°ë§í•œë‹¤. ë„ì‹œ ìˆ˜ê°€ ë§ì•„ ìƒìœ„ ì¼ë¶€ë¶„ë§Œ ë³´ì—¬ì£¼ë„ë¡ ë§Œë“¤ì—ˆë‹¤.

```javascript
const isInitialMatch = (inputValue, target) => {
  const reg = new RegExp(inputValue.split("").map(pattern).join(".*?"), "i");
  const matches = reg.exec(target);
  return Boolean(matches);
};
```

ì´ˆì„± ê²€ìƒ‰ì´ ì¼ì¹˜í•˜ë©´ ì°¸ì´ ë‚˜ì˜¤ëŠ” í•¨ìˆ˜. ë¡œì§ì„ ì˜ ì´í•´í•œ ê±´ ì•„ë‹ˆë¼ ì¶”í›„ í¬ìŠ¤íŒ…í•  ì˜ˆì •ì´ë‹¤.

```javascript
   <input
          className="input--large-icon"
          onChange={handleInputChange}
          value={inputValue}
          placeholder="Search Destination ex. ì„œìš¸, ë¶€ì‚°..."
          onKeyDown={handleKeyDown} //enterë¥¼ ëˆ„ë¥´ë©´ ì„ íƒë¨
          ref={inputRef}
        ></input>
        <div className="clearbtn" onClick={handleClear}>
          Clear
        </div>
      </div>
      {hasText && (
        <DropDown
          options={options}
          handleDropDownClick={handleDropDownClick}
          activeSuggestion={activeSuggestion}
        />
      )}
```

`input` ì°½ì— í…ìŠ¤íŠ¸ê°€ ìˆì„ ë•Œë§Œ DropDown ì»´í¬ë„ŒíŠ¸ê°€ í™œì„±í™”ëœë‹¤.

```javascript
const handleKeyDown = (e) => {
  //enter í‚¤ë¥¼ ëˆ„ë¥´ë©´ input ê°’ì´ í™œì„±í™”ëœ ì˜µì…˜ìœ¼ë¡œ ë³€ê²½
  if (e.keyCode === 13) {
    if (inputValue === "") window.location.reload();
    setInputValue(options[activeSuggestion]);
    setActiveSuggestion(0);
    setHasText(false);
    handleSearch && handleSearch();
  }

  // arrow í‚¤ë¥¼ ëˆ„ë¥´ë©´ í™œì„±í™”ëœ ì˜µì…˜ -1
  else if (e.keyCode === 38) {
    if (activeSuggestion === 0) {
      return;
    }
    setActiveSuggestion(activeSuggestion - 1);
  }

  // arrow í‚¤ë¥¼ ëˆ„ë¥´ë©´ í™œì„±í™”ëœ ì˜µì…˜ +1
  else if (e.keyCode === 40) {
    if (activeSuggestion === options.length - 1) {
      return;
    }
    setActiveSuggestion(activeSuggestion + 1);
  }
};
```

ë“œë¡­ë‹¤ìš´ì—ì„œ í‚¤ë³´ë“œë¡œ ì„ íƒ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜.

```javascript
/* ìë™ì™„ì„± ë°°ì—´(options)ì— ë“¤ì–´ê°„ ê°’ë“¤ì´ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ë³´ì—¬ì§€ëŠ” ë¶€ë¶„ */
export const DropDown = ({
  options,
  handleDropDownClick,
  activeSuggestion,
}) => {
  return (
    <DropDownContainer>
      {options.map((option, index) => {
        let className;

        if (index === activeSuggestion) {
          className = "active";
        }
        return (
          <li
            key={option}
            onClick={() => handleDropDownClick(option)} //í´ë¦­í•œ ê°’ì´ inputValueì— ë“¤ì–´ê°
            className={className}
          >
            {option}
          </li>
        );
      })}
    </DropDownContainer>
  );
};
```

ì´ˆì„± ë‹¨ìœ„ë¡œ ê²€ìƒ‰ ê²°ê³¼ê°€ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ë³´ì´ê³ , í˜„ì¬ í™œì„±í™”ëœ ê°’ì˜ ì¸ë±ìŠ¤ê°€ `activeSuggestion`ì´ ëœë‹¤.

`inputValue`ì— `options[activeSuggestion]`ì˜ ê°’ì´ ë‹´ê¸°ê³ , ê²°ê³¼ì ìœ¼ë¡œ `Home` í˜ì´ì§€ì—ì„œ ì„ ì–¸ëœ `destination`ì— `inputValue` ê°’ì´ ë“¤ì–´ê°€ê²Œ ëœë‹¤.

ğŸ¤” ê²½ì£¼ë¥¼ ê²€ìƒ‰í•  ê²½ìš° ì •í™•í•œ ì§€ì—­ê²€ìƒ‰ì´ ë˜ì§€ ì•ŠëŠ”ë° ì•„ì§ í•´ê²°ë°©ë²•ì„ ì°¾ì§€ ëª»í–ˆë‹¤.
{: .notice--primary}

<img width="362" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-02-03 á„‹á…©á„Œá…¥á†« 10 20 33" src="https://user-images.githubusercontent.com/110877564/216488478-5a70a53d-ab70-4217-9ae8-5d160f00d59c.png">

<br />

## 3. Main Page

ìœ„ì—ì„œ ë§Œë“  `Home` í˜ì´ì§€ì˜ ì¼ì • ì„ íƒ ê¸°ëŠ¥ê³¼ ë¡œê·¸ì¸ ì‚¬ìš©ìê°€ ì‘ì„±í•œ ì—¬í–‰, ê²Œì‹œê¸€, ì „ì²´ ê²Œì‹œíŒì—ì„œ 5ê°œì˜ ê¸€ì„ ë³¼ ìˆ˜ ìˆëŠ” í˜ì´ì§€. 5ê°œì˜ ê¸€ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìµœì‹ ìˆœìœ¼ë¡œ 5ê°œë¥¼ ë Œë”ë§í•˜ë©°, ì¢‹ì•„ìš” ìˆœ, ì¡°íšŒìˆ˜ ìˆœìœ¼ë¡œë„ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤. ì—¬í–‰, ê²Œì‹œê¸€, ê²Œì‹œíŒì€ ëª¨ë‘ ê°ê° ë³„ê°œì˜ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ `Main` í˜ì´ì§€ì—ì„œëŠ” ë¶ˆëŸ¬ì˜¤ê¸°ë§Œ í–ˆë‹¤.
