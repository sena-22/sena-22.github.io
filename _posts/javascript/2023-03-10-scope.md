---
title: "[Deep Dive] 11. 스코프"
excerpt: "scope"

categories:
  - javascript
tags:
  - [javascript, scope]

toc: true
toc_sticky: true

date: 2023-03-10
last_modified_at: 2023-03-10
---

# 스코프

스코프는 변수나 함수가 유효한 범위를 말한다.

만약 같은 이름의 변수가 두 개인 경우, 그 변수를 참조할 때 둘 중 어느 변수를 참조할 지 결정해야 한다. 이때 자바스크립트 엔진은 스코프를 통해 어떤 변수를 참조할 지 결정한다.

```javascript
let name = "jack"

function getName() {
  let name = "an"
  console.log("local", name) // local an
}

getName()

console.log("global", name) //global jack
```

변수는 선언된 위치에 따라 스코프가 결정되는데, 전역에서 선언된 name은 모든 곳에서 참조가 가능하지만, 함수 안에서 선언된 name은 함수 안에서만 참조할 수 있고 외부에서는 참조할 수 없다.

<br/>

# 스코프의 종류

스코프는 크게 전역 스코프와 지역 스코프로 나뉜다.

전역 스코프는 어디에서든 참조할 수 있지만, 지역 스코프는 함수 자신과 하위 함수에서만 참조가 가능하다.

전역 스코프에서 선언된 변수를 전역 변수, 지역 내부에서 선언된 변수를 지역 변수라고 한다.

<br/>

# 함수 레벨 스코프와 블록 레벨 스코프

함수를 포함하여 if문, for문 등 모든 코드 블록이 지역 스코프를 만들 수 있는 특성을 블록 레벨 스코프라고 한다. 반면 함수 코드 블록만 지역 스코프로 인정하는 것을 함수 레벨 스코프라고 한다.

자바스크립트에서 var로 선언된 변수는 함수 레벨 스코프를 가진다. 따라서 함수 외에 다른 블록 내부에서 선언된 변수는 전역 스코프를 가지게 된다.

```javascript
var a = 1

if (true) {
  var a = 10
}

console.log(a) // 10
```

함수 레벨 스코프는 예상하지 못한 부분에서 값을 바꿔버리는 문제를 일으키게 된다.

ES6에서 도입된 let, const로 선언된 변수는 블록 레벨 스코프를 가진다.

```javascript
let a = 1

if (true) {
  let a = 10
}

console.log(a) // 1
```

코드 블록 내부에서 let으로 선언한 변수 a는 지역 스코프를 가지게 되어 외부에서 참조할 수 없게 된다.

<br/>

# 스코프 체인

스코프 체인은 스코프가 계층적으로 연결된 것을 말한다.

변수를 참조할 때 자바스크립트 엔진이 변수를 참조하는 코드의 스코프에서 시작해서 그 스코프 내에 찾는 변수가 없으면 상위 스코프로 이동하여 찾고, 또 없으면 다시 상위 스코프로 이동하여 찾는다. 이렇게 연결된 구조를 체인이라고 부른다.

단 이 체인은 상위로만 이동이 가능하고, 하위로는 이동이 불가능하다.
따라서 상위 스코프에서 선언된 변수는 하위 스코프에서 참조가 가능하지만, 하위 스코프에서 선언된 변수는 상위 스코프에서 참조할 수 없다.

```javascript
let a = 1

if (true) {
  console.log(a) //1
}
```

상위 스코프에서 선언된 a를 하위 스코프에서 참조할 수 있다.

```javascript
if (true) {
  let a = 1
}

console.log(a) // Uncaught ReferenceError: a is not defined
```

하위 스코프(블록문 안)에서 선언된 a를 상위 스코프(블록문 밖)에서 참조할 수 없다.
