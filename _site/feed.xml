<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-02-06T17:54:10+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Reyna</title><subtitle>An amazing website.</subtitle><author><name>Reyna</name></author><entry><title type="html">[Main Project] 06. Day.js 적용</title><link href="http://localhost:4000/main%20project/1-dayjs/" rel="alternate" type="text/html" title="[Main Project] 06. Day.js 적용" /><published>2023-02-06T00:00:00+09:00</published><updated>2023-02-06T00:00:00+09:00</updated><id>http://localhost:4000/main%20project/1-dayjs</id><content type="html" xml:base="http://localhost:4000/main%20project/1-dayjs/"><![CDATA[<p>프로젝트를 처음 시작할 때 <code class="language-plaintext highlighter-rouge">moment</code>를 사용해서 날짜 형식을 지정했는데, 콘솔창에 경고문이 계속 생겼다. 알아보니 현재 개발이 중단되었고, 용량 이슈도 있어 대체하기로 했다. 보통 <code class="language-plaintext highlighter-rouge">Day.js</code>가 용량이 적고 <code class="language-plaintext highlighter-rouge">moment</code>와 유사해서 많이 사용되어 프로젝트에서도 바로 적용하기로 했다.</p>

<h3 id="1-설치">1. 설치</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">npm</span> <span class="nx">i</span> <span class="nx">dayjs</span>
</code></pre></div></div>

<h3 id="2-사용">2. 사용</h3>

<p>사용법은 moment와 거의 비슷하다.</p>

<p class="notice--primary"><a href="https://day.js.org/docs/en/parse/string-format">dayjs 공식문서</a></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">dayjs</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dayjs</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">dayjs/locale/ko</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//한국어 설정</span>

<span class="kd">const</span> <span class="nx">formatDate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">dayjs</span><span class="p">(</span><span class="nx">date</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="dl">"</span><span class="s2">YYYY-MM-DD</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="3-유틸-파일로-만들기">3. 유틸 파일로 만들기</h3>

<p>moment를 필요한 컴포넌트에서 각각 사용했더니 dayjs로 변환할 때 일일이 고치느라 시간이 오래 걸렸다. 그래서 유틸파일로 만들어 꺼내쓸 수 있도록 유틸파일로 바꾸었다.</p>

<p><code class="language-plaintext highlighter-rouge">dayUtil.js</code> 파일을 만들어 포맷을 저장해둔다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//dayUtil.js</span>

<span class="k">import</span> <span class="nx">dayjs</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">dayjs</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">dayjs/locale/ko</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">formatTomorrow</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">dayjs</span><span class="p">(</span><span class="nx">date</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">d</span><span class="dl">"</span><span class="p">).</span><span class="nx">toDate</span><span class="p">();</span>
</code></pre></div></div>

<p>다음과 같이 사용하면 된다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Calendar.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">formatTomorrow</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../Util/dayUtil</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">tomorrow</span> <span class="o">=</span> <span class="nx">formatTomorrow</span><span class="p">(</span><span class="nx">day</span><span class="p">);</span>
</code></pre></div></div>]]></content><author><name>Reyna</name></author><category term="main project" /><category term="project" /><category term="codestates" /><category term="dayjs" /><category term="react" /><category term="moment" /><summary type="html"><![CDATA[dayjs]]></summary></entry><entry><title type="html">[Main Project] 05. Error Log</title><link href="http://localhost:4000/main%20project/2-error-log/" rel="alternate" type="text/html" title="[Main Project] 05. Error Log" /><published>2023-02-06T00:00:00+09:00</published><updated>2023-02-06T00:00:00+09:00</updated><id>http://localhost:4000/main%20project/2-error-log</id><content type="html" xml:base="http://localhost:4000/main%20project/2-error-log/"><![CDATA[<p>프로젝트 진행 중 발생한 에러와 실제 웹사이트를 사용하며 불편함을 느꼈던 부분들을 정리해보았다.</p>

<h3 id="1-게시글-생성-페이지-에러">1. 게시글 생성 페이지 에러</h3>

<p class="notice--primary">🤔 특정 장소 선택 시 게시글 생성이 되지 않는 문제</p>

<p>구글 api에서 장소 정보를 불러올 때 rating 부분이 존재하지 않을 경우 <code class="language-plaintext highlighter-rouge">null</code> 값으로 들어와서 발생하는 에러로 확인되어 백엔드 쪽에서 초기값을 0.0으로 설정 후 해결되었다.</p>

<h3 id="2-유저-이름-수정-에러">2. 유저 이름 수정 에러</h3>

<p class="notice--primary">🤔 유저 이름에 특수문자, 이모티콘 입력 시 제출은 되고 반영은 되지 않는 문제</p>

<p>유저 이름 제출 시 유효성 검사를 추가했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">nameRegex</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">a-zA-Z0-9ㄱ-ㅎㅏ-ㅣ가-힣</span><span class="se">]{1,20}</span><span class="sr">$/</span><span class="p">;</span>
    <span class="p">...</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">nameRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">submitInfo</span><span class="p">.</span><span class="nx">id</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">영문과 한글 또는 숫자를 1~20자리로 입력하세요.</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">...</span>
</code></pre></div></div>

<h3 id="3-게시글-수정-페이지-reset-버튼이-안-되는-에러">3. 게시글 수정 페이지 reset 버튼이 안 되는 에러</h3>

<p class="notice--primary">🤔 reset 버튼을 눌렀을 때 화면 상으로는 리셋되는데 실제로는 저장이 되지 않는 문제</p>

<p>입력값 초기화 시 <code class="language-plaintext highlighter-rouge">useRef</code>를 사용해서 해당 메모를 초기화하는 방식을 사용했는데, <code class="language-plaintext highlighter-rouge">state</code>에는 반영이 안되어서 생긴 문제로 확인되었다. 초기화 시에 해당 <code class="language-plaintext highlighter-rouge">ref</code>와 <code class="language-plaintext highlighter-rouge">state</code>를 함께 초기화하는 방식으로 해결했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//입력값 초기화</span>
<span class="kd">const</span> <span class="nx">handelClear</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">findIndex</span> <span class="o">=</span> <span class="nx">placeNotes</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">placeNote</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">placeNote</span><span class="p">.</span><span class="nx">placeId</span><span class="p">)</span> <span class="o">===</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="kd">const</span> <span class="nx">placeId</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">memoRef</span><span class="p">.</span><span class="nx">current</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">===</span> <span class="nx">id</span>
  <span class="p">);</span>
  <span class="nx">memoRef</span><span class="p">.</span><span class="nx">current</span><span class="p">[</span><span class="nx">placeId</span><span class="p">].</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">changeNotes</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">placeNotes</span><span class="p">];</span> <span class="c1">//ref, state 같이 변경</span>
  <span class="nx">changeNotes</span><span class="p">[</span><span class="nx">findIndex</span><span class="p">].</span><span class="nx">description</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="nx">setPlaceNotes</span><span class="p">(</span><span class="nx">changeNotes</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="4-장소가-없는-경우-에러-발생">4. 장소가 없는 경우 에러 발생</h3>

<p class="notice--primary">🤔 일정 등록 시 장소를 선택하지 않은 경우 다른 페이지에서 에러 발생</p>

<p>장소가 있을 경우에만 <code class="language-plaintext highlighter-rouge">state</code>를 설정하도록 변경했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//장소가 있을 때만 setState로 위도와 경도 설정</span>
<span class="nx">startCode</span> <span class="o">&amp;&amp;</span>
  <span class="nx">setGeocode</span><span class="p">({</span>
    <span class="na">lat</span><span class="p">:</span> <span class="nx">startCode</span><span class="p">.</span><span class="nx">latitude</span><span class="p">,</span>
    <span class="na">lng</span><span class="p">:</span> <span class="nx">startCode</span><span class="p">.</span><span class="nx">longitude</span><span class="p">,</span>
  <span class="p">});</span>
</code></pre></div></div>

<h3 id="5-게시판-textarea-고정">5. 게시판 textarea 고정</h3>

<p><code class="language-plaintext highlighter-rouge">textarea</code> 태그는 원래 사이즈를 조절할 수 있다. 사이즈를 고정하고 싶을 땐 <code class="language-plaintext highlighter-rouge">resize:none</code>을 사용하면 된다.</p>

<h3 id="6-회원가입-페이지에서-비밀번호-입력-시-볼-수-있는-버튼-만들기">6. 회원가입 페이지에서 비밀번호 입력 시 볼 수 있는 버튼 만들기</h3>

<p>password를 볼 수 있는 상태와 상태를 변경할 수 있는 함수를 만들었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">showPswd</span><span class="p">,</span> <span class="nx">setShowPswd</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">toggleShowPswd</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">setShowPswd</span><span class="p">(</span><span class="o">!</span><span class="nx">showPswd</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>상태에 따라 다른 이미지를 보여준다. 이미지를 클릭 시 상태가 바뀐다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">toggleShowPswd</span><span class="p">}</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">eye</span><span class="dl">"</span><span class="o">&gt;</span>
  <span class="p">{</span><span class="nx">showPswd</span> <span class="p">?</span> <span class="err">😀</span> <span class="p">:</span> <span class="err">😔</span><span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span></code></pre></div></div>

<p>상태가 바뀔 때마다 <code class="language-plaintext highlighter-rouge">input</code>의 <code class="language-plaintext highlighter-rouge">type</code>을 바꿔준다. <code class="language-plaintext highlighter-rouge">type</code>이 <code class="language-plaintext highlighter-rouge">password</code>인 경우 값이 보이지 않고, <code class="language-plaintext highlighter-rouge">text</code>인 경우 입력한 값을 볼 수 있다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">input</span>
  <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">input</span><span class="dl">"</span>
  <span class="nx">type</span><span class="o">=</span><span class="p">{</span><span class="nx">showPswd</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">}</span>
  <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Enter your password</span><span class="dl">"</span>
<span class="o">/&gt;</span>
</code></pre></div></div>

<h3 id="6-활성화된-버튼-색상-바꾸기">6. 활성화된 버튼 색상 바꾸기</h3>

<p>게시판에 조회수순, 최신순 등 여러 방식으로 정렬을 할 수 있는 버튼이 있는데, 어느 버튼을 눌렀는지 보여줄 필요가 있어서 모드에 따른 css를 변경했다.</p>

<p>모드는 <code class="language-plaintext highlighter-rouge">state</code>로 관리했고, 버튼을 눌렀을 때 해당 모드로 바꿔서 api 요청을 하는 방식이었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">mode</span><span class="p">,</span> <span class="nx">setMode</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">"</span><span class="s2">boardId</span><span class="dl">"</span><span class="p">);</span>

<span class="o">&lt;</span><span class="nx">button</span>
  <span class="nx">className</span><span class="o">=</span><span class="p">{</span>
    <span class="nx">mode</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">boardId</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">mode--selected mode--button</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">mode--button</span><span class="dl">"</span>
  <span class="p">}</span>
  <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setMode</span><span class="p">(</span><span class="dl">"</span><span class="s2">boardId</span><span class="dl">"</span><span class="p">)}</span>
<span class="o">&gt;</span>
  <span class="nx">최신순</span>
<span class="o">&lt;</span><span class="sr">/button&gt;</span><span class="err">;
</span></code></pre></div></div>

<p>현재 모드의 상태와 버튼의 모드가 일치할 경우 <code class="language-plaintext highlighter-rouge">mode--selected</code>라는 <code class="language-plaintext highlighter-rouge">className</code>을 추가해서 css를 변경했다.</p>]]></content><author><name>Reyna</name></author><category term="main project" /><category term="project" /><category term="codestates" /><category term="error" /><category term="react" /><summary type="html"><![CDATA[프로젝트 진행 중 발생한 에러들]]></summary></entry><entry><title type="html">[Main Project] 03. user page 구성</title><link href="http://localhost:4000/main%20project/2-user-page/" rel="alternate" type="text/html" title="[Main Project] 03. user page 구성" /><published>2023-02-03T00:00:00+09:00</published><updated>2023-02-03T00:00:00+09:00</updated><id>http://localhost:4000/main%20project/2-user-page</id><content type="html" xml:base="http://localhost:4000/main%20project/2-user-page/"><![CDATA[<h2 id="1-라우팅">1. 라우팅</h2>

<p>유저 프로필 페이지와 프로필 수정 페이지로 나누었다.</p>

<p><code class="language-plaintext highlighter-rouge">memberId</code>를 파라미터로 넣어 유저를 식별할 수 있도록 만들었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//app.js</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">UserProfile</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Pages/UserProfile</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">UserProfileEdit</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Pages/UserProfileEdit</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>

    <span class="p">...</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;&gt;</span>
      <span class="o">&lt;</span><span class="nx">Routes</span><span class="o">&gt;</span>
       <span class="p">...</span>
        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/user/:memberId</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">UserProfile</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/user/:memberId/edit</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">UserProfileEdit</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>       <span class="p">...</span>
      <span class="o">&lt;</span><span class="sr">/Routes</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="2-유저-프로필-페이지">2. 유저 프로필 페이지</h2>

<p>유저의 기본적인 프로필 조회, 작성한 여행과 게시글을 볼 수 있는 페이지. 여행과 게시글은 <code class="language-plaintext highlighter-rouge">main</code> 페이지와 마찬가지로 컴포넌트를 재사용했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//UserProfile.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useNavigate</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-router-dom</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">navigate</span> <span class="o">=</span> <span class="nx">useNavigate</span><span class="p">();</span>

<span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">navigate</span><span class="p">(</span><span class="s2">`/user/</span><span class="p">${</span><span class="nx">memberId</span><span class="p">}</span><span class="s2">/edit`</span><span class="p">)}</span><span class="o">&gt;</span>
  <span class="nx">Edit</span> <span class="nx">profile</span>
<span class="o">&lt;</span><span class="sr">/button&gt;</span><span class="err">;
</span></code></pre></div></div>

<p>페이지 이동은 <code class="language-plaintext highlighter-rouge">useNavigate</code>를 사용했다.</p>

<h2 id="3-유저-프로필-수정-페이지">3. 유저 프로필 수정 페이지</h2>

<h3 id="이미지-이름-비밀번호-수정">이미지, 이름, 비밀번호 수정</h3>

<p>수정 페이지에서는 유저 프로필 이미지와 이름 수정, 비밀번호 변경, 회원 탈퇴가 가능하다. 각 기능은 탭으로 구분하고, 탈퇴의 경우 모달 창을 띄우는 방식으로 구현했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//UserProfileEdit.js</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">currentTab</span><span class="p">,</span> <span class="nx">clickTab</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">menuArr</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">General</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">content</span><span class="p">:</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">General</span>
          <span class="nx">handleChange</span><span class="o">=</span><span class="p">{</span><span class="nx">handleChange</span><span class="p">}</span>
          <span class="nx">handleSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">}</span>
          <span class="nx">nameRef</span><span class="o">=</span><span class="p">{</span><span class="nx">nameRef</span><span class="p">}</span>
        <span class="sr">/</span><span class="err">&gt;
</span>      <span class="p">),</span>
    <span class="p">},</span>
    <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Password</span><span class="dl">'</span><span class="p">,</span> <span class="na">content</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">Password</span> <span class="o">/&gt;</span> <span class="p">},</span>
  <span class="p">];</span>

    <span class="kd">const</span> <span class="nx">selectMenuHandler</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">clickTab</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="p">...</span>

  <span class="k">return</span><span class="p">(</span>
    <span class="p">...</span>
        <span class="p">{</span><span class="nx">menuArr</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">el</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span> <span class="c1">//sidebar list</span>
          <span class="o">&lt;</span><span class="nx">li</span>
            <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
            <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span> <span class="o">===</span> <span class="nx">currentTab</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">submenu focused</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">submenu</span><span class="dl">'</span><span class="p">}</span>
            <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="nx">selectMenuHandler</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
            <span class="p">}}</span>
          <span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">el</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>        <span class="p">))}</span>
    <span class="p">...</span>
       <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">main__content</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">menuArr</span><span class="p">[</span><span class="nx">currentTab</span><span class="p">].</span><span class="nx">content</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">)</span>
</code></pre></div></div>

<p>왼쪽 사이드바에 목록이 있고, 선택한 목록의 <code class="language-plaintext highlighter-rouge">index</code>를 <code class="language-plaintext highlighter-rouge">currentTab</code>에 저장하여 선택된 탭의 <code class="language-plaintext highlighter-rouge">content</code>가 우측에 나타난다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//UserProfileEdit.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">DeleteAccount</span><span class="p">,</span> <span class="nx">General</span><span class="p">,</span> <span class="nx">Password</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../Components/user/Tab</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">content</code>는 <code class="language-plaintext highlighter-rouge">Tab</code> 컴포넌트로 따로 만들어서 불러왔다.</p>

<h3 id="회원-탈퇴">회원 탈퇴</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//UserProfileEdit.js</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">modal</span><span class="p">,</span> <span class="nx">setModal</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
 <span class="p">...</span>
  <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setModal</span><span class="p">(</span><span class="kc">true</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Delete</span> <span class="nx">account</span><span class="o">&lt;</span><span class="sr">/li&gt; /</span><span class="o">/</span><span class="nx">sidebar</span> <span class="nx">list</span>

  <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">DeleteAccount</span> <span class="nx">modal</span><span class="o">=</span><span class="p">{</span><span class="nx">modal</span><span class="p">}</span> <span class="nx">setModal</span><span class="o">=</span><span class="p">{</span><span class="nx">setModal</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span></code></pre></div></div>

<p>모달 상태를 <code class="language-plaintext highlighter-rouge">UserProfileEdit.js</code>에서 관리한다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//users.Tab.js, DeleteAccount</span>
<span class="o">&lt;&gt;</span>
  <span class="p">{</span><span class="nx">modal</span> <span class="p">?</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Modal</span>
      <span class="nx">setModal</span><span class="o">=</span><span class="p">{</span><span class="nx">setModal</span><span class="p">}</span>
      <span class="nx">buttonName</span><span class="o">=</span><span class="dl">"</span><span class="s2">Delete account</span><span class="dl">"</span>
      <span class="nx">handleClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleDeleteAccount</span><span class="p">}</span>
    <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">)</span> <span class="p">:</span> <span class="kc">null</span><span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span></code></pre></div></div>

<p>모달상태를 내려받아 <code class="language-plaintext highlighter-rouge">modal</code>이 <code class="language-plaintext highlighter-rouge">true</code>일 때만 열린다.</p>]]></content><author><name>Reyna</name></author><category term="main project" /><category term="project" /><category term="codestates" /><category term="page" /><category term="react" /><summary type="html"><![CDATA[user page]]></summary></entry><entry><title type="html">[Main Project] 04. 게시글 작성, 수정 페이지</title><link href="http://localhost:4000/main%20project/3-board/" rel="alternate" type="text/html" title="[Main Project] 04. 게시글 작성, 수정 페이지" /><published>2023-02-03T00:00:00+09:00</published><updated>2023-02-06T00:00:00+09:00</updated><id>http://localhost:4000/main%20project/3-board</id><content type="html" xml:base="http://localhost:4000/main%20project/3-board/"><![CDATA[<h2 id="1-라우팅">1. 라우팅</h2>

<p>프로젝트의 게시글은 만들었던 <u>일정을 바탕으로 메모와 감상을 추가</u>하는 형식으로 이루어져 있다. 따라서 게시글을 작성할 때에는 먼저 <mark style="background-color: #ffdce0">어떤 일정을 게시글로 만들 것인지 선택하는 페이지</mark>가 필요했다. 또한 작성된 게시글도 렌더링하여 이미 작성된 게시글을 수정하는 기능도 이 페이지에 넣었다.</p>

<p>따라서 게시글/일정 선택 페이지, 게시글 추가 페이지, 게시글 수정 페이지로 나눴다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">//app.js</span>

    <span class="p">...</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;&gt;</span>
      <span class="o">&lt;</span><span class="nx">Routes</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="cm">/*  /!*게시글 작성 시작을 위한 여행선택 페이지*!/*/</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/board/plan</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">WriteBoard</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="p">{</span><span class="cm">/*  /!*게시글 수정 페이지*!/*/</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/board/edit/:boardId</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">EditSingleBoard</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="p">{</span><span class="cm">/*  /!*게시글 작성 페이지*!/*/</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/board/plan/:planId</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">WriteSingleBoard</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>       <span class="p">...</span>
      <span class="o">&lt;</span><span class="sr">/Routes</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">)</span>

  <span class="p">...</span>
</code></pre></div></div>

<h2 id="2-여행게시글-선택-페이지">2. 여행/게시글 선택 페이지</h2>

<p>여행, 게시글을 선택하기 위해 앞서 <code class="language-plaintext highlighter-rouge">main</code> 페이지와 <code class="language-plaintext highlighter-rouge">user</code> 페이지에서 이용했던 작성한 여행, 게시글 컴포넌트를 재사용했다.</p>

<p>기본 틀은 같지만 어디서 클릭하느냐에 따라 조회/작성/수정 페이지가 각각 다르게 나타나야 하는 문제가 생겼다. 처음에는 컴포넌트마다 모드를 props로 바로 넘겨줬는데, 멘토님의 조언으로 모드를 유틸파일로 빼서 어떤 모드가 있는지 알기 쉽게 만드는 방식으로 변경했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Util.constants.js</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">Mode</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">Write</span><span class="p">:</span> <span class="dl">"</span><span class="s2">write</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">Plan</span><span class="p">:</span> <span class="dl">"</span><span class="s2">plan</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">Edit</span><span class="p">:</span> <span class="dl">"</span><span class="s2">edit</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>이렇게 유틸 파일로 만들면 모드에 어떤 종류가 있는지 알기 쉽다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//WriteBoard.js</span>
<span class="o">&lt;</span><span class="nx">MyTrips</span> <span class="nx">mode</span><span class="o">=</span><span class="dl">"</span><span class="s2">write</span><span class="dl">"</span> <span class="o">/&gt;</span>
</code></pre></div></div>

<p>모드를 설정해서 같은 컴포넌트를 여러 곳에서 다르게 렌더링할 수 있다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Components/user</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Mode</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../Util/constants</span><span class="dl">'</span><span class="p">;</span>
<span class="p">...</span>
<span class="kd">const</span> <span class="nx">MyTrips</span> <span class="o">=</span> <span class="p">({</span><span class="nx">mode</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="p">{</span><span class="nx">tripList</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">trip</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">div</span>
            <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">my-trips__card</span><span class="dl">"</span>
            <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">trip</span><span class="p">.</span><span class="nx">planId</span><span class="p">}</span>
            <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">handleNavigate</span><span class="p">(</span><span class="nx">trip</span><span class="p">)}</span>
          <span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">alt</span><span class="o">=</span><span class="dl">"</span><span class="s2">place_image</span><span class="dl">"</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">trip</span><span class="p">.</span><span class="nx">city</span><span class="p">.</span><span class="nx">cityImage</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">meta_title</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">trip</span><span class="p">.</span><span class="nx">planTitle</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">meta_content</span><span class="dl">"</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
                <span class="p">{</span><span class="nx">formatDateKo</span><span class="p">(</span><span class="nx">trip</span><span class="p">.</span><span class="nx">startDate</span><span class="p">)}</span> <span class="o">-</span> <span class="p">{</span><span class="nx">formatDateKo</span><span class="p">(</span><span class="nx">trip</span><span class="p">.</span><span class="nx">endDate</span><span class="p">)}</span>
              <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">...</span>
  <span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">MyTrips</code>는 여행 목록을 보여주는 컴포넌트이다. 게시글 작성 페이지에서는 아직 게시글을 작성하지 않은 여행만 보여줘야 했기 때문에 모든 여행 요청을 불러와 <code class="language-plaintext highlighter-rouge">boardCheck</code>가 <code class="language-plaintext highlighter-rouge">false</code>인 여행만 보여주었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">handleNavigate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">trip</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">navigate</span><span class="p">(</span>
    <span class="nx">mode</span> <span class="o">===</span> <span class="nx">Mode</span><span class="p">.</span><span class="nx">Plan</span>
      <span class="p">?</span> <span class="s2">`/itinerary/</span><span class="p">${</span><span class="nx">trip</span><span class="p">.</span><span class="nx">planId</span><span class="p">}</span><span class="s2">`</span>
      <span class="p">:</span> <span class="s2">`/board/plan/</span><span class="p">${</span><span class="nx">trip</span><span class="p">.</span><span class="nx">planId</span><span class="p">}</span><span class="s2">`</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>목록 중 하나를 클릭 했을 때 내려받은 모드에 따라 다른 곳으로 이동한다.</p>

<h2 id="3-게시글-작성-페이지">3. 게시글 작성 페이지</h2>

<p>게시글은 만들었던 일정을 기반으로 작성하기 때문에 선택 페이지에서 여행을 선택할 때 해당 <code class="language-plaintext highlighter-rouge">planId</code>를 파라미터로 가진 주소로 이동하게 만든 후, 작성 페이지에서 <code class="language-plaintext highlighter-rouge">useParams</code>를 이용하여 해당 여행 일정을 불러와서 페이지를 구성했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useParams</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-router-dom</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">planId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useParams</span><span class="p">();</span>
</code></pre></div></div>

<p>이런 식으로 파라미터를 가져오는 것이 가능하다.</p>

<p>작성 페이지에서 어려웠던 부분은 장소별 메모를 api 형식에 맞춰서 만드는 부분이었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">placeDesc</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">placeId</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">placeId</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>객체 안에 키 값이 문자열이고, 값에 <code class="language-plaintext highlighter-rouge">index</code>를 넣어야 했는데, 지금까지는 <code class="language-plaintext highlighter-rouge">{index : "내용"}</code>과 같이 해당 <code class="language-plaintext highlighter-rouge">index</code>를 키로, 내용을 값으로 넣는 식으로만 만들었어서 생소했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">placeNotes</span><span class="p">,</span> <span class="nx">setPlaceNotes</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

 <span class="k">return</span> <span class="p">(</span>
  <span class="p">...</span>
    <span class="o">&lt;</span><span class="nx">textarea</span>
      <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span>
      <span class="nx">name</span><span class="o">=</span><span class="p">{</span><span class="nx">place</span><span class="p">.</span><span class="nx">placeId</span><span class="p">}</span>
      <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">handleChangeNote</span><span class="p">(</span><span class="nx">e</span><span class="p">)}</span>
     <span class="sr">/</span><span class="err">&gt;
</span>    <span class="p">...</span>
 <span class="p">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">body</code>에 넣을 배열을 상태로 만들고, 노트를 입력하는 <code class="language-plaintext highlighter-rouge">textarea</code>의 값이 변경되면 <code class="language-plaintext highlighter-rouge">handleChangeNote</code> 함수가 실행된다. <code class="language-plaintext highlighter-rouge">name</code>으로 장소의 id를 넣어두었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//장소별 note 변경</span>
<span class="kd">const</span> <span class="nx">handleChangeNote</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">findIndex</span> <span class="o">=</span> <span class="nx">placeNotes</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">comment</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">comment</span><span class="p">.</span><span class="nx">placeId</span><span class="p">)</span> <span class="o">===</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">findIndex</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setPlaceNotes</span><span class="p">([</span>
      <span class="p">...</span><span class="nx">placeNotes</span><span class="p">,</span>
      <span class="p">{</span> <span class="na">placeId</span><span class="p">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">),</span> <span class="na">description</span><span class="p">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">},</span>
    <span class="p">]);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">changeNotes</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">placeNotes</span><span class="p">];</span>
    <span class="nx">changeNotes</span><span class="p">[</span><span class="nx">findIndex</span><span class="p">].</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="nx">setPlaceNotes</span><span class="p">(</span><span class="nx">changeNotes</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">findIndex</code>라는 변수를 선언해서 placeNotes에 메모를 작성한 장소의 id와 동일한 <code class="language-plaintext highlighter-rouge">placeId</code>를 가진 인덱스가 있는지 판별한다.</p>

<p>만약 없다면 -1이 나올 것이고, 그 경우에는 새로운 객체를 추가해서 장소의 id가 <code class="language-plaintext highlighter-rouge">placeId</code>, 설명이 <code class="language-plaintext highlighter-rouge">description</code>라는 키의 값으로 들어간다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">setPlaceNotes</span><span class="p">([</span>
  <span class="p">...</span><span class="nx">placeNotes</span><span class="p">,</span>
  <span class="p">{</span> <span class="na">placeId</span><span class="p">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">),</span> <span class="na">description</span><span class="p">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="p">},</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>반면 동일한 id가 있다면 배열을 통째로 복사해서 복사한 배열에서 해당 인덱스의 <code class="language-plaintext highlighter-rouge">description</code>의 값만 바꾼다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">changeNotes</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">placeNotes</span><span class="p">];</span>
<span class="nx">changeNotes</span><span class="p">[</span><span class="nx">findIndex</span><span class="p">].</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="nx">setPlaceNotes</span><span class="p">(</span><span class="nx">changeNotes</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="4-게시글-수정-페이지">4. 게시글 수정 페이지</h2>

<p>수정 페이지는 작성 페이지와 거의 동일한 구조를 가지고 있다.
원래 작성했던 내용을 불러와서 띄워줘야 하는 부분만 달랐는데, 데이터 구조가 복잡한 만큼 <code class="language-plaintext highlighter-rouge">map</code>을 써서 초기값을 설정하다보니 코드가 지저분해졌다는 생각이 든다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">days</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">day</span> <span class="o">=&gt;</span>
          <span class="nx">day</span><span class="p">.</span><span class="nx">placeDetails</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">place</span> <span class="o">=&gt;</span>
            <span class="nx">setPlaceNotes</span><span class="p">([</span>
              <span class="p">...</span><span class="nx">placeNotes</span><span class="p">,</span>
              <span class="p">{</span>
                <span class="na">placeId</span><span class="p">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">place</span><span class="p">.</span><span class="nx">placeId</span><span class="p">),</span>
                <span class="na">description</span><span class="p">:</span> <span class="nx">place</span><span class="p">.</span><span class="nx">description</span><span class="p">,</span>
              <span class="p">},</span>
            <span class="p">]),</span>
          <span class="p">),</span>
</code></pre></div></div>

<p>수정 페이지에서는 게시글 삭제도 가능하다. 삭제 후에는 다시 계획할 수 있는 페이지로 이동하도록 만들었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">handleDeleteLog</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">confirm</span><span class="p">(</span><span class="dl">"</span><span class="s2">게시글을 삭제하시겠습니까?</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">axios</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">DELETE</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REACT_APP_API_URL</span><span class="p">}</span><span class="s2">/board/</span><span class="p">${</span><span class="nx">boardId</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">Authorization</span><span class="p">:</span> <span class="nx">token</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">navigate</span><span class="p">(</span><span class="s2">`/board/plan`</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>삭제나 회원 탈퇴 같은 중요한 선택의 경우 확인 과정을 통해 실수를 방지할 수 있다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">confirm</span><span class="p">(</span><span class="dl">"</span><span class="s2">확인 문구</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">yes를</span> <span class="nx">선택할</span> <span class="nx">경우</span><span class="p">(</span><span class="nx">true인</span> <span class="nx">경우</span><span class="p">)</span> <span class="nx">실행할</span> <span class="nx">코드</span>
  <span class="p">}</span>
</code></pre></div></div>]]></content><author><name>Reyna</name></author><category term="main project" /><category term="project" /><category term="codestates" /><category term="page" /><category term="react" /><summary type="html"><![CDATA[board]]></summary></entry><entry><title type="html">[Main Project] 02. main page 구성</title><link href="http://localhost:4000/main%20project/1-main-page/" rel="alternate" type="text/html" title="[Main Project] 02. main page 구성" /><published>2023-02-03T00:00:00+09:00</published><updated>2023-02-03T00:00:00+09:00</updated><id>http://localhost:4000/main%20project/1-main-page</id><content type="html" xml:base="http://localhost:4000/main%20project/1-main-page/"><![CDATA[<h2 id="1-라우팅">1. 라우팅</h2>

<p>같은 url로 로그인 전과 로그인 후의 메인 페이지를 다르게 나타내는 방법을 사용했다. <br />
프로젝트에서 리액트를 사용했기 때문에 <code class="language-plaintext highlighter-rouge">react-router-dom</code>을 사용해서 라우팅 작업을 해주었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//app.js</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">Home</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Pages/Home</span><span class="dl">'</span><span class="p">;</span> <span class="c1">//만들어둔 페이지를 불러왔다</span>
<span class="k">import</span> <span class="nx">Main</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Pages/Main</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">isLoggedIn</span><span class="p">,</span> <span class="nx">setIsLoggedIn</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

    <span class="p">...</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;&gt;</span>
      <span class="o">&lt;</span><span class="nx">Routes</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="nx">isLoggedIn</span> <span class="p">?</span> <span class="o">&lt;</span><span class="nx">Main</span> <span class="o">/&gt;</span> <span class="p">:</span> <span class="o">&lt;</span><span class="nx">Home</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>       <span class="p">...</span>
      <span class="o">&lt;</span><span class="sr">/Routes</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>로그인 여부를 상태로 만들어 로그인 되었을 경우에는 <code class="language-plaintext highlighter-rouge">Main</code> 페이지가, 로그인이 되지 않은 경우에는 <code class="language-plaintext highlighter-rouge">Home</code> 페이지가 나타난다. 로그인 상태는 <code class="language-plaintext highlighter-rouge">token</code>과 <code class="language-plaintext highlighter-rouge">memberId</code> 등으로 판별했다.</p>

<h2 id="2-home-page">2. Home Page</h2>

<h3 id="-구조">📃 구조</h3>

<p><code class="language-plaintext highlighter-rouge">Home</code> 페이지와 <code class="language-plaintext highlighter-rouge">Main</code> 페이지가 동일하게 일정 추가 기능을 가지고 있기 때문에 <code class="language-plaintext highlighter-rouge">Home</code> 페이지를 컴포넌트화 시켜 <code class="language-plaintext highlighter-rouge">Main</code> 페이지에서 사용하였다.</p>

<p>로그인 여부에 따라 <code class="language-plaintext highlighter-rouge">className</code>을 다르게 만들고, <mark style="background-color: #ffdce0">날짜</mark>, <mark style="background-color: #ffdce0">도시</mark>를 선택한 후 비로그인 상태에서는 로그인 화면으로, 로그인 상태에서는 바로 일정 등록 페이지로 갈 수 있도록 만들었다.</p>

<h3 id="-autocomplete">📃 AutoComplete</h3>

<p>도시 선택의 경우 DB에 저장된 도시 목록을 불러와 자동 완성 기능을 사용할 수 있도록 구현했다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">city</span><span class="p">,</span> <span class="nx">setCity</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">();</span>
</code></pre></div></div>

<p>도시 목록을 불러와 <code class="language-plaintext highlighter-rouge">city</code>에 담아준다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">inputValue</span> <span class="o">===</span> <span class="dl">""</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setHasText</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="nx">setOptions</span><span class="p">([]);</span>
    <span class="nx">setSearch</span> <span class="o">&amp;&amp;</span> <span class="nx">setSearch</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">setOptions</span><span class="p">(</span><span class="nx">matchStock</span><span class="p">(</span><span class="nx">city</span><span class="p">,</span> <span class="nx">inputValue</span><span class="p">));</span>
    <span class="nx">handleDestination</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="p">[</span><span class="nx">inputValue</span><span class="p">]);</span>
</code></pre></div></div>

<p>검색창에 값을 입력할 때마다 <code class="language-plaintext highlighter-rouge">options</code> 배열이 업데이트 된다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">matchStock</span> <span class="o">=</span> <span class="p">(</span><span class="nx">city</span><span class="p">,</span> <span class="nx">inputValue</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">inputValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">inputValue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">city</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">option</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">isInitialMatch</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">,</span> <span class="nx">option</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">option</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">option</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">options</code>에 보여줄 값을 제어하는 부분. 도시 목록 중에서 <code class="language-plaintext highlighter-rouge">isInitialMatch</code> 함수에서 <code class="language-plaintext highlighter-rouge">true</code> 값이 나온 도시만 필터링한다. 도시 수가 많아 상위 일부분만 보여주도록 만들었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">isInitialMatch</span> <span class="o">=</span> <span class="p">(</span><span class="nx">inputValue</span><span class="p">,</span> <span class="nx">target</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">reg</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">inputValue</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">""</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">pattern</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">"</span><span class="s2">.*?</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">i</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">matches</span> <span class="o">=</span> <span class="nx">reg</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
  <span class="k">return</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">matches</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>초성 검색이 일치하면 참이 나오는 함수. 로직을 잘 이해한 건 아니라 추후 포스팅할 예정이다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="o">&lt;</span><span class="nx">input</span>
          <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">input--large-icon</span><span class="dl">"</span>
          <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">handleInputChange</span><span class="p">}</span>
          <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">inputValue</span><span class="p">}</span>
          <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Search Destination ex. 서울, 부산...</span><span class="dl">"</span>
          <span class="nx">onKeyDown</span><span class="o">=</span><span class="p">{</span><span class="nx">handleKeyDown</span><span class="p">}</span> <span class="c1">//enter를 누르면 선택됨</span>
          <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">inputRef</span><span class="p">}</span>
        <span class="o">&gt;&lt;</span><span class="sr">/input</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">clearbtn</span><span class="dl">"</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClear</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="nx">Clear</span>
        <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>      <span class="p">{</span><span class="nx">hasText</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">DropDown</span>
          <span class="nx">options</span><span class="o">=</span><span class="p">{</span><span class="nx">options</span><span class="p">}</span>
          <span class="nx">handleDropDownClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleDropDownClick</span><span class="p">}</span>
          <span class="nx">activeSuggestion</span><span class="o">=</span><span class="p">{</span><span class="nx">activeSuggestion</span><span class="p">}</span>
        <span class="sr">/</span><span class="err">&gt;
</span>      <span class="p">)}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">input</code> 창에 텍스트가 있을 때만 DropDown 컴포넌트가 활성화된다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">handleKeyDown</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//enter 키를 누르면 input 값이 활성화된 옵션으로 변경</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">13</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">inputValue</span> <span class="o">===</span> <span class="dl">""</span><span class="p">)</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
    <span class="nx">setInputValue</span><span class="p">(</span><span class="nx">options</span><span class="p">[</span><span class="nx">activeSuggestion</span><span class="p">]);</span>
    <span class="nx">setActiveSuggestion</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="nx">setHasText</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="nx">handleSearch</span> <span class="o">&amp;&amp;</span> <span class="nx">handleSearch</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">// arrow 키를 누르면 활성화된 옵션 -1</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">38</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">activeSuggestion</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">setActiveSuggestion</span><span class="p">(</span><span class="nx">activeSuggestion</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// arrow 키를 누르면 활성화된 옵션 +1</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">40</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">activeSuggestion</span> <span class="o">===</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">setActiveSuggestion</span><span class="p">(</span><span class="nx">activeSuggestion</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>드롭다운에서 키보드로 선택 값을 변경할 수 있는 함수.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* 자동완성 배열(options)에 들어간 값들이 드롭다운으로 보여지는 부분 */</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">DropDown</span> <span class="o">=</span> <span class="p">({</span>
  <span class="nx">options</span><span class="p">,</span>
  <span class="nx">handleDropDownClick</span><span class="p">,</span>
  <span class="nx">activeSuggestion</span><span class="p">,</span>
<span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">DropDownContainer</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">options</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">option</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">className</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="nx">activeSuggestion</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">active</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">li</span>
            <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">option</span><span class="p">}</span>
            <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">handleDropDownClick</span><span class="p">(</span><span class="nx">option</span><span class="p">)}</span> <span class="c1">//클릭한 값이 inputValue에 들어감</span>
            <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">className</span><span class="p">}</span>
          <span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">option</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>        <span class="p">);</span>
      <span class="p">})}</span>
    <span class="o">&lt;</span><span class="sr">/DropDownContainer</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>초성 단위로 검색 결과가 드롭다운으로 보이고, 현재 활성화된 값의 인덱스가 <code class="language-plaintext highlighter-rouge">activeSuggestion</code>이 된다.</p>

<p><code class="language-plaintext highlighter-rouge">inputValue</code>에 <code class="language-plaintext highlighter-rouge">options[activeSuggestion]</code>의 값이 담기고, 결과적으로 <code class="language-plaintext highlighter-rouge">Home</code> 페이지에서 선언된 <code class="language-plaintext highlighter-rouge">destination</code>에 <code class="language-plaintext highlighter-rouge">inputValue</code> 값이 들어가게 된다.</p>

<p class="notice--primary">🤔 경주를 검색할 경우 정확한 지역검색이 되지 않는데 아직 해결방법을 찾지 못했다.</p>

<p><img width="362" alt="스크린샷 2023-02-03 오전 10 20 33" src="https://user-images.githubusercontent.com/110877564/216488478-5a70a53d-ab70-4217-9ae8-5d160f00d59c.png" /></p>

<p><br /></p>

<h2 id="3-main-page">3. Main Page</h2>

<p>위에서 만든 <code class="language-plaintext highlighter-rouge">Home</code> 페이지의 일정 선택 기능과 로그인 사용자가 작성한 여행, 게시글, 전체 게시판에서 5개의 글을 볼 수 있는 페이지. 5개의 글은 기본적으로 최신순으로 5개를 렌더링하며, 좋아요 순, 조회수 순으로도 변경이 가능하다. 여행, 게시글, 게시판은 모두 각각 별개의 컴포넌트로 만들어 <code class="language-plaintext highlighter-rouge">Main</code> 페이지에서는 불러오기만 했다.</p>]]></content><author><name>Reyna</name></author><category term="main project" /><category term="project" /><category term="codestates" /><category term="page" /><category term="react" /><summary type="html"><![CDATA[main page]]></summary></entry><entry><title type="html">[Main Project] 01. react-date-range 사용하기</title><link href="http://localhost:4000/main%20project/calendar-library/" rel="alternate" type="text/html" title="[Main Project] 01. react-date-range 사용하기" /><published>2023-02-02T00:00:00+09:00</published><updated>2023-02-02T00:00:00+09:00</updated><id>http://localhost:4000/main%20project/calendar-library</id><content type="html" xml:base="http://localhost:4000/main%20project/calendar-library/"><![CDATA[<h2 id="1-달력-라이브러리-선택">1. 달력 라이브러리 선택</h2>

<p>여행 일정 선택을 위한 달력 라이브러리를 골라야했는데, 달력 라이브러리 종류가 많아서 필요한 기능이 있는지, 사용량이 많고 정보가 잘 정리되어 있는지를 기준으로 선택했다.</p>

<p>🧐 <strong>필요한 기능</strong> <br /></p>

<ol>
  <li>시작 날짝와 종료 날짜 <br /></li>
  <li>선택 시 기간 표시(다중 범위)<br /></li>
  <li>달력 두 개가 붙어 있는 모양</li>
</ol>

<h3 id="react-date-range">react-date-range</h3>

<hr />

<p class="notice--primary"><a href="https://hypeserver.github.io/react-date-range/#daterange">react-date-range 공식문서</a> <br />
<a href="https://www.npmjs.com/package/react-date-range">react-date-range npm</a></p>

<h3 id="react-calendar">react-calendar</h3>

<hr />

<p class="notice--primary"><a href="https://www.npmjs.com/package/react-calendar">react-calendar npm</a></p>

<h3 id="react-day-picker">react-day-picker</h3>

<hr />

<p class="notice--primary"><a href="https://www.npmjs.com/package/react-day-picker">react-day-picker npm</a></p>

<ul>
  <li>최근까지 업데이트 됨</li>
</ul>

<h3 id="react-date-picker">react-date-picker</h3>

<hr />

<p class="notice--primary"><a href="https://www.npmjs.com/package/react-datepicker">react-date-picker</a></p>

<ul>
  <li>사용량 가장 많음</li>
</ul>

<p>여러 라이브러리를 비교해보고 두 개의 달력을 표시하기 쉽고 디자인을 크게 건드리지 않아도 될 것 같아 <code class="language-plaintext highlighter-rouge">react-date-range</code>를 사용했다.</p>

<h2 id="2-달력-적용하기">2. 달력 적용하기</h2>

<h3 id="설치">설치</h3>

<hr />

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">react</span><span class="o">-</span><span class="nx">date</span><span class="o">-</span><span class="nx">range</span>
</code></pre></div></div>

<h3 id="적용">적용</h3>

<hr />

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Calendar.js</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">react-date-range/dist/styles.css</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// 메인 css 파일</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">react-date-range/dist/theme/default.css</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// 테마 CSS 파일</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">DateRange</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-date-range</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">formatTomorrow</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../Util/dayUtil</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">day</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">tomorrow</span> <span class="o">=</span> <span class="nx">formatTomorrow</span><span class="p">(</span><span class="nx">day</span><span class="p">);</span> <span class="c1">//날짜 형식을 내일로 변경</span>

<span class="kd">const</span> <span class="p">[</span><span class="nx">date</span><span class="p">,</span> <span class="nx">setDate</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([</span>
  <span class="p">{</span>
    <span class="na">startDate</span><span class="p">:</span> <span class="nx">tomorrow</span><span class="p">,</span>
    <span class="na">endDate</span><span class="p">:</span> <span class="nx">tomorrow</span><span class="p">,</span>
    <span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">selection</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]);</span>

<span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">handleDate</span><span class="p">(</span><span class="nx">date</span><span class="p">);</span>
<span class="p">},</span> <span class="p">[</span><span class="nx">date</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">startDate</span><span class="p">,</span> <span class="nx">date</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">endDate</span><span class="p">]);</span>
</code></pre></div></div>

<p>시작 날짜와 종료 날짜를 모두 다음 날로 지정해주었다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="p">(</span>
  <span class="p">...</span>
  <span class="o">&lt;</span><span class="nx">DateRange</span>
    <span class="nx">editableDateInputs</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
    <span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setDate</span><span class="p">([</span><span class="nx">item</span><span class="p">.</span><span class="nx">selection</span><span class="p">])}</span>
    <span class="nx">moveRangeOnFirstSelection</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
    <span class="nx">ranges</span><span class="o">=</span><span class="p">{</span><span class="nx">date</span><span class="p">}</span>
    <span class="nx">months</span><span class="o">=</span><span class="p">{</span><span class="mi">2</span><span class="p">}</span> <span class="c1">//달력 두 달 표시</span>
    <span class="nx">direction</span><span class="o">=</span><span class="dl">"</span><span class="s2">horizontal</span><span class="dl">"</span> <span class="c1">//달력을 가로로 배치</span>
    <span class="nx">dateDisplayFormat</span><span class="o">=</span><span class="p">{</span><span class="dl">"</span><span class="s2">LLLL yyyy</span><span class="dl">"</span><span class="p">}</span> <span class="c1">// 날짜 포맷값</span>
  <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">...</span>
<span class="p">)</span>
</code></pre></div></div>

<h3 id="결과">결과</h3>

<hr />

<p><img width="561" alt="스크린샷 2023-02-02 오후 11 14 15" src="https://user-images.githubusercontent.com/110877564/216350582-67febd33-0ba2-4d8a-8d8c-e66710a527fb.png" class="align-center" /></p>

<p>위와 같이 시작 날짜, 종료 날짜를 선택하면 범위가 표시된다! (css는 좀 수정된 상태)</p>

<p class="notice--primary">💡 사용 전에 <a href="https://codesandbox.io/s/react-date-range-o3cvs0?file=/src/App.js">CodeSandbox</a>에서 간단하게 적용해본 것</p>]]></content><author><name>Reyna</name></author><category term="main project" /><category term="project" /><category term="codestates" /><category term="calendar" /><summary type="html"><![CDATA[달력 라이브러리]]></summary></entry><entry><title type="html">[Github Blog] Github 블로그 폰트 변경하기</title><link href="http://localhost:4000/blog/font/" rel="alternate" type="text/html" title="[Github Blog] Github 블로그 폰트 변경하기" /><published>2023-02-02T00:00:00+09:00</published><updated>2023-02-02T00:00:00+09:00</updated><id>http://localhost:4000/blog/font</id><content type="html" xml:base="http://localhost:4000/blog/font/"><![CDATA[<h3 id="font-선택하기">font 선택하기</h3>

<hr />

<p><a href="https://noonnu.cc/">눈누</a>나 <a href="https://fonts.google.com/">Google Fonts</a>에서 마음에 드는 폰트를 선택한다.</p>

<h3 id="사용하기">사용하기</h3>

<hr />

<p><code class="language-plaintext highlighter-rouge">main.scss</code> 에 붙여 넣고 <code class="language-plaintext highlighter-rouge">_variables.scss</code>에서 선언한다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$serif</span><span class="p">:</span> <span class="nx">Georgia</span><span class="p">,</span> <span class="nx">Times</span><span class="p">,</span> <span class="nx">serif</span> <span class="o">!</span><span class="k">default</span><span class="p">;</span>
</code></pre></div></div>

<p>사용하고 싶은 곳에서 변수처럼 사용하면 된다.</p>]]></content><author><name>Reyna</name></author><category term="blog" /><category term="Blog" /><category term="Github" /><category term="Font" /></entry><entry><title type="html">[Github Blog] Github 블로그 만들기</title><link href="http://localhost:4000/blog/hello-blog/" rel="alternate" type="text/html" title="[Github Blog] Github 블로그 만들기" /><published>2023-02-01T00:00:00+09:00</published><updated>2023-02-02T00:00:00+09:00</updated><id>http://localhost:4000/blog/hello-blog</id><content type="html" xml:base="http://localhost:4000/blog/hello-blog/"><![CDATA[<h2 id="1-repository-생성">1. Repository 생성</h2>

<p><code class="language-plaintext highlighter-rouge">깃허브 계정.github.io</code> 라는 이름으로 레포지토리를 생성해서 로컬로 클론한다.</p>

<h2 id="2-ruby-jekyll-bundler-설치">2. ruby, Jekyll, Bundler 설치</h2>

<p>블로그를 참고해서 지킬을 설치했다! 이 부분은 정확히 이해 하고 있지 못해서 다시 알아볼 예정이다.</p>

<p class="notice--primary"><a href="https://ansohxxn.github.io/blog/i-made-my-blog/">https://ansohxxn.github.io/blog/i-made-my-blog/</a>
<br />
<a href="https://jojoldu.tistory.com/288">https://jojoldu.tistory.com/288</a>
<br />
<a href="https://codecamper.me/blog/122/">https://codecamper.me/blog/122/</a></p>

<h2 id="3-지킬-테마-선택">3. 지킬 테마 선택</h2>

<p><strong>minimal-mistakes</strong> 테마를 선택했다.</p>

<p class="notice--primary"><a href="https://github.com/mmistakes/minimal-mistakes">https://github.com/mmistakes/minimal-mistakes</a></p>

<p>선택한 테마의 <code class="language-plaintext highlighter-rouge">github repository</code> 압축 파일을 받아서 만들어둔 폴더에 붙여넣고 원격 레포지토리로 <code class="language-plaintext highlighter-rouge">push</code> 한다.</p>

<p class="notice--primary"><a href="https://github.com/sharadcodes/jekyll-theme-serial-programmer">https://github.com/sharadcodes/jekyll-theme-serial-programmer</a></p>

<p><code class="language-plaintext highlighter-rouge">serial-programmer</code> 테마도 고민했는데 카테고리가 없고, 라이트 모드로 사용하려면 따로 설정을 해줘야 할 것 같아 익숙해지면 바꿔보고 싶다.</p>]]></content><author><name>Reyna</name></author><category term="blog" /><category term="Blog" /><category term="Github" /><category term="First Post" /><summary type="html"><![CDATA[github pages를 이용해서 블로그 만들기.]]></summary></entry></feed>